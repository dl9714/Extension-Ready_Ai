[REQUEST]
aistudioì—ì„œ **í°ìƒ‰(âšª)ë§Œ ëœ¨ëŠ” ì´ìœ **ëŠ” ì§€ê¸ˆ ë¡œì§ì´ ì´ê±°ë¼ì„œ ê·¸ë˜.

* **í°ìƒ‰ì€ â€œì´ˆê¸° 1íšŒ ë¬´ì¡°ê±´ ìƒíƒœ ì „ì†¡â€**(`hasSentInitialState`) ë•Œë¬¸ì—, ìƒì„±ì¤‘ ê°ì§€ê°€ ì‹¤íŒ¨í•´ë„ í•­ìƒ í‘œì‹œë¨.
* ê·¼ë° **ì£¼í™©(ğŸŸ )/ì—°ë‘(ğŸŸ¢)** ëŠ” â€œìƒì„±ì¤‘ ì—¬ë¶€(currentlyGenerating)â€ê°€ `false -> true -> false`ë¡œ ë°”ë€Œì–´ì•¼ ë‚˜ì˜¤ëŠ”ë°,
* aistudio ìª½ ê°ì§€ê°€ ì§€ê¸ˆ **`mat-icon`, `mat-progress-bar`ë§Œ ì°¾ê³  ìˆì–´ì„œ** ëŒ€ë¶€ë¶„ì˜ AI Studio UIì—ì„œ(íŠ¹íˆ `<run-button>` ê¸°ë°˜) **ìƒì„±ì¤‘ì„ ì˜ì›íˆ ëª» ì¡ìŒ** â†’ ê·¸ë˜ì„œ ğŸŸ /ğŸŸ¢ê°€ ì•ˆ ëœ¸.

AI StudioëŠ” ì‹¤ì œë¡œ **`run-button` ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸** ì•„ë˜ì— Run/Stop ë²„íŠ¼ì´ ë“¤ì–´ê°€ê±°ë‚˜ `button.run-button` í˜•íƒœë¡œ ì¡íˆëŠ” ì¼€ì´ìŠ¤ê°€ ë§ì•„ì„œ, ê·¸ê±¸ ê¸°ì¤€ìœ¼ë¡œ ê°ì§€í•´ì•¼ í•¨. ([Scribd][1])

ì•„ë˜ íŒ¨ì¹˜ ì ìš©í•˜ë©´ AI Studioì—ì„œë„:

* Run ì˜ì—­ ë²„íŠ¼ì˜ `aria-label/í…ìŠ¤íŠ¸`ê°€ Stop/Cancel/ì¤‘ì§€ë¥˜ë©´ ğŸŸ 
* Stopì´ ì‚¬ë¼ì§€ê³  ì™„ë£Œë˜ë©´ ğŸŸ¢
* í´ë¦­/ìŠ¤í¬ë¡¤í•˜ë©´ âšª ë¡œ ì •ìƒ ë™ì‘í•˜ê²Œ ë¨

```diff
--- /mnt/data/ready_ai_orig/sources/src/content.js	2026-02-11 13:14:16.000000000 +0000
+++ /mnt/data/ready_ai/sources/src/content.js	2026-02-11 04:31:02.986245155 +0000
@@ -55,6 +55,111 @@
   if (host.includes('claude.ai')) return 'claude';
   return null;
 }
+
+// ===== AI Studio ìƒì„±ì¤‘ ê°ì§€ ê°•í™” =====
+// ê¸°ì¡´ êµ¬í˜„ì€ mat-icon / mat-progress-bar ì—ë§Œ ì˜ì¡´í–ˆëŠ”ë°,
+// AI StudioëŠ” <run-button> (ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸) ì•„ë˜ì— ì‹¤ì œ ë²„íŠ¼ì´ ë“¤ì–´ê°€ ìˆì–´
+// stop ì•„ì´ì½˜/í…ìŠ¤íŠ¸ë¥¼ ëª» ì¡ëŠ” ê²½ìš°ê°€ í”í•˜ë‹¤.
+//
+// ëª©í‘œ: ì•„ë˜ ì‹ í˜¸ ì¤‘ í•˜ë‚˜ë¼ë„ ì¡íˆë©´ "ìƒì„±ì¤‘"ìœ¼ë¡œ íŒë‹¨
+//  - Run ì˜ì—­(run-button) ë‚´ ë²„íŠ¼ì˜ aria-label / í…ìŠ¤íŠ¸ì— Stop/Cancel/ì¤‘ì§€ ë“±ì´ ì¡´ì¬
+//  - run-button ì£¼ë³€ ì•„ì´ì½˜(material-symbols-outlined / mat-icon) ì— stopë¥˜ í‘œì‹œ
+//  - progressbar/spinner ë¥˜ í‘œì‹œ
+//  - aria-busy / data-streaming ê°™ì€ busy í”Œë˜ê·¸
+function _normText(v) {
+  if (v == null) return '';
+  return String(v).replace(/\s+/g, ' ').trim().toLowerCase();
+}
+
+function _includesAny(haystack, needles) {
+  const h = _normText(haystack);
+  for (const n of needles) {
+    const nn = _normText(n);
+    if (!nn) continue;
+    if (h.includes(nn)) return true;
+  }
+  return false;
+}
+
+function _firstVisible(selector) {
+  const els = Array.from(document.querySelectorAll(selector));
+  return els.find(isVisible) || null;
+}
+
+function _collectUnique(els) {
+  const out = [];
+  const seen = new Set();
+  for (const el of els) {
+    if (!el) continue;
+    if (seen.has(el)) continue;
+    seen.add(el);
+    out.push(el);
+  }
+  return out;
+}
+
+function _btnLabelText(btn) {
+  if (!btn) return '';
+  const aria = _normText(btn.getAttribute && btn.getAttribute('aria-label'));
+  const txt = _normText(btn.innerText || btn.textContent || '');
+  return `${aria} ${txt}`.trim();
+}
+
+function detectAiStudioGenerating() {
+  const STOP_WORDS = [
+    'stop', 'cancel', 'abort',
+    'ì¤‘ì§€', 'ì •ì§€', 'ì¤‘ë‹¨', 'ì·¨ì†Œ'
+  ];
+  const STOP_ICON_WORDS = ['stop', 'cancel', 'block', 'close'];
+
+  // 1) run-button ì£¼ë³€ ë²„íŠ¼ í…ìŠ¤íŠ¸/aria-label ê¸°ë°˜
+  const runWrapper = document.querySelector('run-button');
+  const preferredButtons = runWrapper
+    ? Array.from(runWrapper.querySelectorAll('button, [role="button"]'))
+    : [];
+
+  const globalButtons = Array.from(document.querySelectorAll(
+    'run-button button, button.run-button, button[aria-label], div[role="button"][aria-label]'
+  ));
+
+  const candidates = _collectUnique([...preferredButtons, ...globalButtons]);
+  for (const btn of candidates) {
+    if (!isVisible(btn)) continue;
+    const label = _btnLabelText(btn);
+    if (_includesAny(label, STOP_WORDS)) return true;
+  }
+
+  // 2) ì•„ì´ì½˜ ê¸°ë°˜ (AI StudioëŠ” mat-iconì´ ì—†ê±°ë‚˜ material-symbols-outlinedë§Œ ì“°ëŠ” ê²½ìš°ê°€ ìˆìŒ)
+  const iconSelectors = [
+    'run-button mat-icon',
+    'run-button .material-symbols-outlined',
+    'div.right-side mat-icon',
+    'div.right-side .material-symbols-outlined',
+  ];
+  for (const sel of iconSelectors) {
+    const icons = Array.from(document.querySelectorAll(sel)).filter(isVisible);
+    for (const icon of icons) {
+      const t = _normText(icon.innerText || icon.textContent || '');
+      if (_includesAny(t, STOP_ICON_WORDS)) return true;
+    }
+  }
+
+  // 3) ë¡œë”©/í”„ë¡œê·¸ë ˆìŠ¤ í‘œì‹œ
+  // - role=progressbar ëŠ” í”„ë ˆì„ì›Œí¬/ë²„ì „ì´ ë‹¬ë¼ë„ ë¹„êµì  ì•ˆì •ì 
+  // - ì¼ë¶€ ë¹Œë“œì—ì„œëŠ” mat-progress-spinner/linear-progress ë“±ì„ ì‚¬ìš©
+  const progress = _firstVisible(
+    'run-button [role="progressbar"], [role="progressbar"], mat-progress-bar, mat-progress-spinner, .spinner, .loading'
+  );
+  if (progress) return true;
+
+  // 4) busy í”Œë˜ê·¸
+  const busy = _firstVisible(
+    'ms-autoscroll-container [aria-busy="true"], ms-chat-turn [aria-busy="true"], [data-generating="true"], [data-streaming="true"]'
+  );
+  if (busy) return true;
+
+  return false;
+}
 // íƒ­ ì œëª©(Title)ì— ë°°ì§€(ì´ëª¨ì§€) ë‹¬ê¸° - ì•„ì´ì½˜ ë°”ë¡œ ì˜†ì— í‘œì‹œë¨
 function updateTitleBadge() {
   // 1. í˜„ì¬ ì œëª© ê°€ì ¸ì˜¤ê¸°
@@ -86,16 +191,7 @@
     currentlyGenerating = Array.from(btns).some(btn => isVisible(btn));
   } 
   else if (platform === 'aistudio') {
-    // AI Studio:
-    // 1. Google Material Icon ìì²´ê°€ 'stop', 'cancel', 'block' ì¸ì§€ í™•ì¸ (ê°€ì¥ í™•ì‹¤í•¨)
-    const icons = Array.from(document.querySelectorAll('mat-icon'));
-    const hasStopIcon = icons.some(icon => {
-      const iconName = icon.innerText.trim().toLowerCase();
-      return ['stop', 'cancel', 'block', 'close'].includes(iconName) && isVisible(icon);
-    });
-    // 2. ë¡œë”©ë°” í™•ì¸
-    const progressBar = document.querySelector('mat-progress-bar');
-    currentlyGenerating = hasStopIcon || isVisible(progressBar);
+    currentlyGenerating = detectAiStudioGenerating();
   } 
   else if (platform === 'claude') {
     // Claude: ë²„íŠ¼ í…ìŠ¤íŠ¸ì— "Stop"ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
```

### ìš”ì•½

* í°ìƒ‰ë§Œ ëœ¨ëŠ” ê±´ **ì´ˆê¸° ìƒíƒœ ì „ì†¡ì€ í•­ìƒ ë˜ëŠ”ë°**, AI Studioì—ì„œ **â€œìƒì„±ì¤‘â€ ê°ì§€ ì…€ë ‰í„°ê°€ í‹€ë ¤ì„œ** ğŸŸ /ğŸŸ¢ë¡œ ëª» ë„˜ì–´ê°€ì„œì„.
* íŒ¨ì¹˜ë¡œ AI Studioë¥¼ **`run-button`/Stop ë²„íŠ¼(aria-label, í…ìŠ¤íŠ¸, ì•„ì´ì½˜, progress, aria-busy)** ê¸°ë°˜ìœ¼ë¡œ ê°ì§€í•˜ê²Œ ë°”ê¿”ì„œ ğŸŸ /ğŸŸ¢ ì •ìƒ ë™ì‘í•˜ê²Œ í•¨.

[1]: https://www.scribd.com/document/917009549/ai-studio-enhanced "Ai Studio Enhanced | PDF"


(ì°¸ê³ : ì´ íŒŒì¼ì€ ë¶„ì„ëœ ì†ŒìŠ¤ ì½”ë“œê°€ í¬í•¨ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.)