[REQUEST]
aistudioì—ì„œ **í°ìƒ‰(âšª)ë§Œ ëœ¨ëŠ” ì´ìœ **ëŠ” ë”± ì´ê±°ì•¼:

* ì§€ê¸ˆ êµ¬ì¡°ëŠ” content scriptê°€ **â€œìƒì„±ì¤‘ì¸ì§€(isGenerating)â€**ë¥¼ DOMì—ì„œ ì¡ì•„ì•¼ ğŸŸ /ğŸŸ¢ë¡œ ë°”ë€ŒëŠ”ë°,
* **AI StudioëŠ” ìƒì„± UI(Stop ë²„íŠ¼/í”„ë¡œê·¸ë ˆìŠ¤)ê°€ iframe ì•ˆìª½ì´ê±°ë‚˜(í˜¹ì€ ì›¹ì»´í¬ë„ŒíŠ¸/shadow ìª½)**ì— ë“¤ì–´ê°€ ìˆì–´ì„œ,
* **top-frameì—ì„œë§Œ DOMì„ ë³´ë©´ ìƒì„±ì¤‘ í‘œì‹œë¥¼ ëª» ì¡ëŠ” ì¼€ì´ìŠ¤**ê°€ ìƒê¹€.
* ê·¸ë˜ì„œ contentëŠ” â€œì´ˆê¸° 1íšŒ(=isGenerating=false)â€ë§Œ ë³´ë‚´ê³  â†’ backgroundëŠ” ê³„ì† **âšª**ë¡œë§Œ ìœ ì§€ë˜ëŠ” í˜„ìƒì´ ë‚˜ì˜¨ë‹¤.

ì•„ë˜ íŒ¨ì¹˜ëŠ” ê·¸ê±¸ â€œê·¼ë³¸ì ìœ¼ë¡œâ€ ë§‰ëŠ” ë°©ì‹ìœ¼ë¡œ ê³ ì³¤ì–´:

1. **manifestì— `all_frames:true`** ë„£ì–´ì„œ iframeì—ë„ content script ì£¼ì…
2. backgroundì—ì„œ **frameIdë³„ ìƒíƒœë¥¼ í•©ì‚°**í•´ì„œ íƒ­ ë‹¨ìœ„ë¡œ ğŸŸ /ğŸŸ¢/âšª ê²°ì •
3. AI Studio ìª½ì€ stop/progress ê°ì§€ë¥¼ ë” ë„“ê²Œ ì¡ê³ ,
4. frame ìƒíƒœê°€ staleë¡œ ë‚¨ì§€ ì•Šê²Œ contentì—ì„œ **5ì´ˆ heartbeat**ë„ ê°™ì´ ë³´ëƒ„

---

```diff
diff --git a/sources/manifest.json b/sources/manifest.json
index bdf0a20..fe740f2 100644
--- a/sources/manifest.json
+++ b/sources/manifest.json
@@ -29,7 +29,8 @@
       "js": [
         "src/sites.js",
         "src/content.js"
-      ]
+      ],
+      "all_frames": true
     }
   ]
 }
\ No newline at end of file
diff --git a/sources/src/background.js b/sources/src/background.js
index 9f608fe..e8345fc 100644
--- a/sources/src/background.js
+++ b/sources/src/background.js
@@ -11,6 +11,57 @@ try {
 //   - ORANGE: ìƒì„±ì¤‘
 //   - GREEN : ìƒì„±ì™„ë£Œ(í´ë¦­Â·ìŠ¤í¬ë¡¤ë¡œ í™•ì¸ ì „)
 let tabStates = {}; // { tabId: { status: 'WHITE' | 'ORANGE' | 'GREEN', platform: '' } }
+
+// Frame-level generating aggregation
+// - AI Studio ë“±ì€ UIê°€ iframe/ì›¹ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ë“¤ì–´ê°€ì„œ top-frame DOMë§Œ ë³´ë©´ "ìƒì„±ì¤‘" ë²„íŠ¼ì„ ëª» ì¡ëŠ” ê²½ìš°ê°€ ìˆìŒ.
+// - content scriptë¥¼ all_framesë¡œ ì£¼ì…í•˜ê³ (frameIdë³„ë¡œ) ìƒì„± ìƒíƒœë¥¼ í•©ì‚°í•´ì„œ íƒ­ ë‹¨ìœ„ë¡œ ORANGE/GREEN/WHITEë¥¼ ê²°ì •í•œë‹¤.
+let tabFrameStates = {}; // { [tabId]: { [frameId]: { isGenerating, platform, siteName, lastAt } } }
+const FRAME_TTL_MS = 20000; // content ìª½ heartbeat(ê¸°ë³¸ 5s) ê¸°ì¤€ìœ¼ë¡œ ì¶©ë¶„íˆ í¬ê²Œ
+
+function upsertFrameState(tabId, frameId, isGenerating, platform, siteName) {
+  if (typeof tabId !== 'number') return;
+  const fid = String(frameId ?? 0);
+  if (!tabFrameStates[tabId]) tabFrameStates[tabId] = {};
+  tabFrameStates[tabId][fid] = {
+    isGenerating: !!isGenerating,
+    platform: platform || '',
+    siteName: siteName || '',
+    lastAt: Date.now(),
+  };
+}
+
+// ì˜¤ë˜ëœ frame ìƒíƒœëŠ” ì œê±°í•˜ê³ , "í˜„ì¬ íƒ­ ê¸°ì¤€" í•©ì‚° ìƒíƒœë¥¼ ë°˜í™˜
+function aggregateTabState(tabId) {
+  const frames = tabFrameStates[tabId];
+  const now = Date.now();
+  let anyGenerating = false;
+  let latest = null;
+
+  if (frames && typeof frames === 'object') {
+    for (const [fid, st] of Object.entries(frames)) {
+      if (!st) {
+        delete frames[fid];
+        continue;
+      }
+      const lastAt = st.lastAt || 0;
+      if (lastAt && now - lastAt > FRAME_TTL_MS) {
+        // frameì´ ì‚¬ë¼ì¡Œê±°ë‚˜ content scriptê°€ ì£½ì€ ì¼€ì´ìŠ¤ ë°©ì§€
+        delete frames[fid];
+        continue;
+      }
+      if (!latest || lastAt > (latest.lastAt || 0)) latest = st;
+      if (st.isGenerating) anyGenerating = true;
+    }
+    if (!Object.keys(frames).length) delete tabFrameStates[tabId];
+  }
+
+  return {
+    anyGenerating,
+    platform: latest?.platform || '',
+    siteName: latest?.siteName || '',
+  };
+}
+
 let settings = { dndMode: false, badgeEnabled: true };
 let _siteConfigCache = { enabledSites: null, customSites: [] };
 function getSiteConfig(cb) {
@@ -120,44 +171,57 @@ function updateIcon(tabId) {
 chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
   if (!sender.tab) return;
   const tabId = sender.tab.id;
+  const frameId = sender.frameId ?? 0;
+
   if (message.action === 'status_update') {
+    const platform = message.platform || '';
+    const siteName = message.siteName || '';
+
+    // frameId ë³„ ìƒíƒœë¥¼ ì €ì¥
+    upsertFrameState(tabId, frameId, !!message.isGenerating, platform, siteName);
+
+    // íƒ­ ë‹¨ìœ„ í•©ì‚°
     const prev = tabStates[tabId]?.status;
-    const platform = message.platform;
-    const siteName = message.siteName;
-    // 1) ìƒì„±ì¤‘ì´ë©´ ë¬´ì¡°ê±´ ORANGE
-    if (message.isGenerating) {
-      tabStates[tabId] = { status: 'ORANGE', platform };
+    const agg = aggregateTabState(tabId);
+    const anyGen = !!agg.anyGenerating;
+    const effPlatform = agg.platform || platform;
+
+    // 1) ìƒì„±ì¤‘(ì–´ëŠ frameì´ë“  true) => ë¬´ì¡°ê±´ ORANGE
+    if (anyGen) {
+      tabStates[tabId] = { status: 'ORANGE', platform: effPlatform };
       updateIcon(tabId);
       return;
     }
+
     // 2) ìƒì„±ì´ ì•„ë‹ˆë¼ë©´:
     //    - ORANGE -> GREEN (ì™„ë£Œ)
     //    - (ì²« ë³´ê³ ) -> WHITE (ì•„ë¬´ ì§ˆë¬¸ ì—†ìŒ)
     //    - GREEN/WHITE ìœ ì§€
     if (!prev) {
-      tabStates[tabId] = { status: 'WHITE', platform };
+      tabStates[tabId] = { status: 'WHITE', platform: effPlatform };
       updateIcon(tabId);
       return;
     }
     if (prev === 'ORANGE') {
-      tabStates[tabId] = { status: 'GREEN', platform };
+      tabStates[tabId] = { status: 'GREEN', platform: effPlatform };
       updateIcon(tabId);
       // íƒ­ì´ í˜„ì¬ ë¹„í™œì„±ì´ë©´(ë‹¤ë¥¸ íƒ­ ë³´ê³  ìˆìœ¼ë©´) ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ ìˆìŒ
       chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
         const isActiveTab = tabs.length > 0 && tabs[0].id === tabId;
-        if (!isActiveTab && !settings.dndMode) sendNotification(platform, siteName);
+        if (!isActiveTab && !settings.dndMode) sendNotification(effPlatform, agg.siteName || siteName);
       });
       return;
     }
-    // prevê°€ GREEN/WHITEì¸ë° isGenerating=falseê°€ ì™”ë‹¤ë©´ ìƒíƒœëŠ” ê·¸ëŒ€ë¡œ ë‘”ë‹¤.
+    // prevê°€ GREEN/WHITEì¸ë° anyGen=falseê°€ ì™”ë‹¤ë©´ ìƒíƒœëŠ” ê·¸ëŒ€ë¡œ ë‘”ë‹¤.
     // (ğŸŸ¢ëŠ” í´ë¦­/ìŠ¤í¬ë¡¤ ë©”ì‹œì§€ë¡œë§Œ âšªë¡œ ë°”ë€ë‹¤)
     if (prev === 'GREEN' || prev === 'WHITE') {
       // platformë§Œ ìµœì‹ ìœ¼ë¡œ ë³´ì •
-      tabStates[tabId].platform = platform;
+      tabStates[tabId].platform = effPlatform;
       updateIcon(tabId);
       return;
     }
   }
+
   // content ìª½ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©(í´ë¦­/ìŠ¤í¬ë¡¤)ë¡œ ğŸŸ¢ -> âšª
   if (message.action === 'user_activity') {
     const prev = tabStates[tabId]?.status;
@@ -167,6 +231,7 @@ function updateIcon(tabId) {
     }
   }
 });
+
 function sendNotification(platform, siteName) {
   let title = siteName ? `${siteName} ë‹µë³€ ì™„ë£Œ` : "AI ë‹µë³€ ì™„ë£Œ";
   // í˜¸í™˜/ë°±ì—…: siteNameì´ ì—†ì„ ë•Œë§Œ í”Œë«í¼ë³„ë¡œ ì¹˜í™˜
@@ -195,7 +260,7 @@ chrome.notifications.onClicked.addListener((notifId) => {
   // (í´ë¦­/ìŠ¤í¬ë¡¤ë¡œë§Œ âšªë¡œ ì „í™˜)
 });
 // íƒ­ ë‹«í˜ ì •ë¦¬
-chrome.tabs.onRemoved.addListener((tabId) => { delete tabStates[tabId]; });
+chrome.tabs.onRemoved.addListener((tabId) => { delete tabStates[tabId]; delete tabFrameStates[tabId]; });
 function isMonitoredUrl(url) {
   if (!url || !(url.startsWith('http://') || url.startsWith('https://'))) return false;
   const sitesApi = globalThis?.ReadyAi?.sites;
@@ -217,6 +282,7 @@ function purgeDisabledTabs() {
       if (isMonitoredUrl(url)) continue;
       // ë” ì´ìƒ ë“±ë¡ëœ ì‚¬ì´íŠ¸ê°€ ì•„ë‹ˆë©´ ìƒíƒœ ì •ë¦¬ + ì•„ì´ì½˜ í°ìƒ‰ìœ¼ë¡œ
       delete tabStates[t.id];
+      delete tabFrameStates[t.id];
       updateIcon(t.id);
     }
   });
diff --git a/sources/src/content.js b/sources/src/content.js
index 7d8f7a8..d1c5f4c 100644
--- a/sources/src/content.js
+++ b/sources/src/content.js
@@ -15,6 +15,16 @@ const TITLE_BADGE = {
   ORANGE: 'ğŸŸ ', // ìƒì„±ì¤‘
   GREEN: 'ğŸŸ¢',  // ì™„ë£Œ(ì•„ì§ í´ë¦­/ìŠ¤í¬ë¡¤ë¡œ í™•ì¸ ì „)
 };
+// top frame ì—¬ë¶€ (íˆ´ë°” ë°°ì§€ëŠ” backgroundì—ì„œ ì²˜ë¦¬. title ë°°ì§€ëŠ” topì—ì„œë§Œ ì˜ë¯¸ ìˆìŒ)
+const IS_TOP_FRAME = (() => {
+  try { return window.top === window; } catch (_) { return true; }
+})();
+
+// background(frame í•©ì‚°) ìª½ì—ì„œ stale frameì„ ì•ˆ ë‚¨ê¸°ê¸° ìœ„í•´
+// contentëŠ” ì£¼ê¸°ì ìœ¼ë¡œ(ê¸°ë³¸ 5s) ìƒíƒœë¥¼ heartbeatë¡œ ë³´ë‚´ì¤€ë‹¤.
+const HEARTBEAT_MS = 5000;
+let _lastHeartbeatAt = 0;
+
 // ===== ë°±ê·¸ë¼ìš´ë“œ íƒ­ì—ì„œë„ ì™„ë£Œ ê°ì§€(íŠ¹íˆ Gemini) =====
 // - GeminiëŠ” DOM ë³€ê²½ì´ childListê°€ ì•„ë‹ˆë¼ attributes/styleë¡œë§Œ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ê°€ ìˆì–´
 //   MutationObserver(childList)ë§Œìœ¼ë¡œëŠ” "ì¤‘ì§€ ë²„íŠ¼ ì‚¬ë¼ì§"ì„ ëª» ì¡ê³  ğŸŸ ê°€ ìœ ì§€ë  ìˆ˜ ìˆìŒ.
@@ -33,6 +43,8 @@ function scheduleCheck() {
     _checkScheduled = false;
     _lastCheckAt = Date.now();
     try {
+      // web component/shadow root êµ¬ì¡°ê°€ ë™ì ìœ¼ë¡œ ë°”ë€ŒëŠ” ì‚¬ì´íŠ¸(AI Studio ë“±) ë³´ê°•
+      maybeRescanShadowRoots();
       checkStatus();
     } catch (e) {
       // content scriptê°€ ì£½ì–´ë²„ë¦¬ë©´ ì´í›„ ìƒíƒœ ê°±ì‹ ì´ ëª¨ë‘ ë©ˆì¶”ë¯€ë¡œ ì˜ˆì™¸ëŠ” ì‚¼í‚´
@@ -181,6 +193,18 @@ function initDeepRoots() {
     scanTreeForShadowRoots(document.documentElement);
   } catch (_) {}
 }
+// monitoring ì¢…ë£Œ/ì¬ì‹œì‘ ì‹œ observer ëˆ„ìˆ˜ ë°©ì§€
+function resetDeepRoots() {
+  try {
+    for (const obs of _deepObservers.values()) {
+      try { obs.disconnect(); } catch (_) {}
+    }
+  } catch (_) {}
+  _deepObservers.clear();
+  _deepRoots.clear();
+  _lastShadowRescanAt = 0;
+}
 
 function deepQuerySelectorAll(selector) {
   const out = [];
@@ -190,6 +214,27 @@ function deepQuerySelectorAll(selector) {
   }
   return out;
 }
+// selectorë¥¼ document + (open) shadow rootsê¹Œì§€ í¬í•¨í•´ì„œ ì°¾ëŠ”ë‹¤.
+// (monitoring ì‹œì‘ ì‹œ initDeepRoots()ê°€ í˜¸ì¶œë˜ì–´ì•¼ ì˜ë¯¸ê°€ ìˆë‹¤)
+function qsa(selector) {
+  try {
+    if (_deepRoots && _deepRoots.size) return deepQuerySelectorAll(selector);
+  } catch (_) {}
+  try {
+    return Array.from(document.querySelectorAll(selector));
+  } catch (_) {
+    return [];
+  }
+}
+
+function normalizeIconName(s) {
+  return String(s || '')
+    .trim()
+    .toLowerCase()
+    .replace(/\s+/g, '');
+}
 
 function getSiteKey() {
   return activeSite?.key || null;
@@ -197,6 +242,7 @@ function getSiteKey() {
 // íƒ­ ì œëª©(Title)ì— ë°°ì§€(ì´ëª¨ì§€) ë‹¬ê¸° - ì•„ì´ì½˜ ë°”ë¡œ ì˜†ì— í‘œì‹œë¨
 function updateTitleBadge() {
+  if (!IS_TOP_FRAME) return;
   if (!monitoring) return;
   // 1. í˜„ì¬ ì œëª© ê°€ì ¸ì˜¤ê¸°
   const currentTitle = document.title;
@@ -213,6 +259,7 @@ function updateTitleBadge() {
   }
 }
 function clearTitleBadge() {
+  if (!IS_TOP_FRAME) return;
   const currentTitle = document.title;
   const cleanTitle = currentTitle.replace(/^([âšªğŸŸ ğŸŸ¢]\s?)+/, "");
   if (cleanTitle !== currentTitle) document.title = cleanTitle;
@@ -231,9 +278,10 @@ function detectChatGPTGenerating() {
   const btn = document.querySelector('[data-testid="stop-button"]');
   return isVisible(btn);
 }
 function detectGeminiGenerating() {
   // Gemini: "ì¤‘ì§€" ë˜ëŠ” "Stop" ë‹¨ì–´ê°€ ë“¤ì–´ê°„ ë²„íŠ¼ì´ í™”ë©´ì— ë³´ì´ëŠ”ì§€ í™•ì¸
-  const btns = document.querySelectorAll('[aria-label*="ì¤‘ì§€"], [aria-label*="Stop"], [aria-label*="stop"]');
-  return Array.from(btns).some((btn) => isVisible(btn));
+  // (open shadowRoot ë‚´ë¶€ì— ë“¤ì–´ê°€ëŠ” ì¼€ì´ìŠ¤ ëŒ€ì‘)
+  const btns = qsa('[aria-label*="ì¤‘ì§€"], [aria-label*="Stop"], [aria-label*="stop"]');
+  return btns.some((btn) => isVisible(btn) && isEnabledButtonLike(btn));
 }
 function detectAiStudioGenerating() {
-  // AI Studio:
-  // 1. Google Material Icon ìì²´ê°€ 'stop', 'cancel', 'block' ì¸ì§€ í™•ì¸ (ê°€ì¥ í™•ì‹¤í•¨)
-  const icons = Array.from(document.querySelectorAll('mat-icon'));
-  const hasStopIcon = icons.some((icon) => {
-    const iconName = icon.innerText.trim().toLowerCase();
-    return ['stop', 'cancel', 'block', 'close'].includes(iconName) && isVisible(icon);
-  });
-  // 2. ë¡œë”©ë°” í™•ì¸
-  const progressBar = document.querySelector('mat-progress-bar');
-  return hasStopIcon || isVisible(progressBar);
+  // AI StudioëŠ” UIê°€ ë°”ë€ŒëŠ” ì†ë„ê°€ ë¹ ë¥´ê³ (Angular/Material),
+  // ê²½ìš°ì— ë”°ë¼ iframe/ì›¹ì»´í¬ë„ŒíŠ¸(open shadow) ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ê¸°ë„ í•´ì„œ
+  // ë‹¨ì¼ selector 1~2ê°œë¡œëŠ” ë†“ì¹˜ê¸° ì‰½ë‹¤.
+  //
+  // ì „ëµ:
+  // 1) "Stop/ì¤‘ì§€/Cancel/ì·¨ì†Œ" ê³„ì—´ì˜ ë²„íŠ¼(aria-label/title/í…ìŠ¤íŠ¸)ì„ ìš°ì„ 
+  // 2) Material icon ì´ë¦„(stop/stop_circle/...) ë˜ëŠ” Material Symbols í…ìŠ¤íŠ¸
+  // 3) progress indicator(mat-progress-bar/spinner/role=progressbar)
+  //
+  // ì£¼ì˜: ë„ˆë¬´ ê³µê²©ì ìœ¼ë¡œ ì¡ìœ¼ë©´ ì˜¤íƒì´ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë‹ˆ "ë³´ì„" + "ë²„íŠ¼ í™œì„±" ìœ„ì£¼ë¡œ íŒë‹¨í•œë‹¤.
+
+  // 1) stop/cancel ë²„íŠ¼(ê°€ì¥ ì‹ ë¢°)
+  const STOP_RE = /(\bstop\b|\bcancel\b|\babort\b|ì¤‘ì§€|ì·¨ì†Œ)/i;
+  const btnCandidates = qsa('button, [role="button"]');
+  for (const el of btnCandidates) {
+    if (!isVisible(el)) continue;
+    if (!isEnabledButtonLike(el)) continue;
+    const aria = (el.getAttribute && el.getAttribute('aria-label')) ? el.getAttribute('aria-label') : '';
+    const title = (el.getAttribute && el.getAttribute('title')) ? el.getAttribute('title') : '';
+    const txt = (el.innerText || el.textContent || '').trim();
+    const hay = `${aria} ${title} ${txt}`.trim();
+    if (!hay) continue;
+    if (STOP_RE.test(hay)) return true;
+  }
+
+  // 2) icon ì´ë¦„ ê¸°ë°˜(Stop ì•„ì´ì½˜)
+  // - mat-icon: "stop", "stop_circle", ...
+  // - material-symbols-outlined: textContentë¡œ ì•„ì´ì½˜ ì´ë¦„ì´ ë“¤ì–´ê°€ëŠ” ê²½ìš°ê°€ ë§ë‹¤.
+  const STOP_ICON = new Set([
+    'stop',
+    'stop_circle',
+    'stopcircle',
+    'stop_circle_outline',
+    'stopcircleoutline',
+    'cancel',
+    'block',
+    'close',
+    'close_small',
+    'pause',
+    'pause_circle',
+    'pausecircle',
+  ]);
+  const iconEls = qsa('mat-icon, span.material-symbols-outlined, span.material-icons, i.material-icons, i.google-material-icons');
+  for (const icon of iconEls) {
+    if (!isVisible(icon)) continue;
+    const name = normalizeIconName(icon.textContent || '');
+    if (!name) continue;
+    if (STOP_ICON.has(name)) return true;
+    if (name === 'stopcircle' || name === 'stopcircleoutline') return true;
+    // "stop_xxx" ê³„ì—´(ì˜ˆ: stop_circle)ë„ í—ˆìš©
+    if (name.startsWith('stop')) return true;
+  }
+
+  // 3) progress indicator
+  const progressEls = qsa([
+    'mat-progress-bar',
+    'mat-progress-spinner',
+    'mat-spinner',
+    '[role="progressbar"]',
+    '.mat-mdc-progress-bar',
+    '.mdc-linear-progress',
+    '.mat-mdc-progress-spinner',
+  ].join(','));
+  for (const p of progressEls) {
+    if (isVisible(p)) return true;
+  }
+
+  return false;
 }
 function detectClaudeGenerating() {
   // Claude: ë²„íŠ¼ í…ìŠ¤íŠ¸ì— "Stop"ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
@@ -275,31 +433,53 @@ function checkStatus() {
   } catch (_) {
     currentlyGenerating = false;
   }
-  // ìƒíƒœê°€ ë³€í–ˆì„ ë•Œë§Œ ì²˜ë¦¬
-  if (isGenerating !== currentlyGenerating) {
-    isGenerating = currentlyGenerating;
-    // ìš”êµ¬ì‚¬í•­:
-    // - ìƒì„± ì‹œì‘: âšª -> ğŸŸ 
-    // - ìƒì„± ì™„ë£Œ: ğŸŸ  -> ğŸŸ¢ (íƒ­ì´ í¬ì»¤ìŠ¤ì¸ì§€ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ê²Œ ë¬´ì¡°ê±´ ğŸŸ¢)
-    // - ğŸŸ¢ ìƒíƒœëŠ” "í´ë¦­/ìŠ¤í¬ë¡¤"ë¡œë§Œ âšªë¡œ ëŒì•„ê°„ë‹¤.
-    if (isGenerating) {
-      completionStatus = 'idle';
-    } else {
-      completionStatus = 'completed';
-    }
-    chrome.runtime.sendMessage({
-      action: "status_update",
-      platform,
-      siteName: activeSite.name,
-      isGenerating,
-    });
-    hasSentInitialState = true;
-  } else if (!hasSentInitialState) {
-    // ì´ˆê¸° 1íšŒëŠ” ë¬´ì¡°ê±´ ìƒíƒœ ì „ì†¡(í°ìƒ‰ ë±ƒì§€ í‘œì‹œìš©)
-    chrome.runtime.sendMessage({
-      action: "status_update",
-      platform,
-      siteName: activeSite.name,
-      isGenerating,
-    });
-    hasSentInitialState = true;
-  }
+  // ìƒíƒœê°€ ë³€í–ˆì„ ë•Œë§Œ ì²˜ë¦¬ + heartbeat(í”„ë ˆì„ í•©ì‚°ìš©)
+  let shouldSend = false;
+
+  if (isGenerating !== currentlyGenerating) {
+    isGenerating = currentlyGenerating;
+    // ìš”êµ¬ì‚¬í•­:
+    // - ìƒì„± ì‹œì‘: âšª -> ğŸŸ 
+    // - ìƒì„± ì™„ë£Œ: ğŸŸ  -> ğŸŸ¢ (íƒ­ì´ í¬ì»¤ìŠ¤ì¸ì§€ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ê²Œ ë¬´ì¡°ê±´ ğŸŸ¢)
+    // - ğŸŸ¢ ìƒíƒœëŠ” "í´ë¦­/ìŠ¤í¬ë¡¤"ë¡œë§Œ âšªë¡œ ëŒì•„ê°„ë‹¤.
+    if (isGenerating) {
+      completionStatus = 'idle';
+    } else {
+      completionStatus = 'completed';
+    }
+    shouldSend = true;
+  } else if (!hasSentInitialState) {
+    // ì´ˆê¸° 1íšŒëŠ” ë¬´ì¡°ê±´ ìƒíƒœ ì „ì†¡(í°ìƒ‰ ë±ƒì§€ í‘œì‹œìš©)
+    shouldSend = true;
+  } else {
+    // frame TTLì´ ë‚¨ì§€ ì•Šë„ë¡ ì£¼ê¸°ì ìœ¼ë¡œ statusë¥¼ ë³´ë‚´ì¤€ë‹¤(ì˜¤íƒ ë°©ì§€: 5ì´ˆì— 1ë²ˆ)
+    const now = Date.now();
+    if (!_lastHeartbeatAt || now - _lastHeartbeatAt >= HEARTBEAT_MS) {
+      shouldSend = true;
+    }
+  }
+
+  if (shouldSend) {
     chrome.runtime.sendMessage({
       action: "status_update",
       platform,
       siteName: activeSite.name,
       isGenerating,
     });
     hasSentInitialState = true;
+    _lastHeartbeatAt = Date.now();
   }
+
   // ë£¨í”„ë§ˆë‹¤ ë°°ì§€ ìƒíƒœ ê°•ì œ ë™ê¸°í™” (ì‚¬ì´íŠ¸ê°€ ì œëª©ì„ ë°”ê¿”ë„ ë‹¤ì‹œ ë®ì–´ì”€)
   updateTitleBadge();
 }
@@ -350,6 +463,14 @@ function startMonitoring(site) {
   completionStatus = 'idle';
   hasSentInitialState = false;
   bindHandlersOnce();
+
+  // open shadowRoot / ë™ì  ì»´í¬ë„ŒíŠ¸ ëŒ€ì‘
+  resetDeepRoots();
+  initDeepRoots();
+
+  // heartbeat ì´ˆê¸°í™”
+  _lastHeartbeatAt = 0;
+
   // DOM ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ ì²´í¬ ì‹¤í–‰
   _observer = new MutationObserver(() => {
     scheduleCheck();
@@ -383,6 +504,8 @@ function stopMonitoring() {
     try { _observer.disconnect(); } catch (_) {}
     _observer = null;
   }
+  resetDeepRoots();
+  _lastHeartbeatAt = 0;
   clearTitleBadge();
 }
 function refreshSiteFromStorage() {
```

---

### ìš”ì•½

* aistudioëŠ” ìƒì„± UIê°€ iframe/shadow ìª½ì— ë“¤ì–´ê°€ì„œ **top-frame DOM ê°ì§€ ì‹¤íŒ¨ â†’ isGeneratingì´ í•­ìƒ false â†’ í°ìƒ‰ë§Œ ìœ ì§€**ê°€ í„°ì§„ ê±°ê³ ,
* íŒ¨ì¹˜ë¡œ **all_frames ì£¼ì… + frame í•©ì‚° + AI Studio ê°ì§€ ê°•í™” + 5ì´ˆ heartbeat**ê¹Œì§€ ë„£ì–´ì„œ ğŸŸ /ğŸŸ¢ê°€ ì •ìƒ ëœ¨ê²Œ ë§Œë“ ë‹¤.


(ì°¸ê³ : ì´ íŒŒì¼ì€ ë¶„ì„ëœ ì†ŒìŠ¤ ì½”ë“œê°€ í¬í•¨ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.)