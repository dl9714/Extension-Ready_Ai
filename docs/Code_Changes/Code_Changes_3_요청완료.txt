[REQUEST]
Gemini ìª½ì€ **ìƒì„± ì™„ë£Œ í›„ì—ë„ â€œì¤‘ì§€(Stop)â€ ë²„íŠ¼ DOMì´ ë‚¨ì•„ìˆëŠ”ë°** ì‹¤ì œë¡œëŠ” `opacity/visibility/disabled` ê°™ì€ ê±¸ë¡œë§Œ ìˆ¨ê¸°ê±°ë‚˜, ë²„íŠ¼ì´ **open shadowRoot ì•ˆìª½ìœ¼ë¡œ ë“¤ì–´ê°€ì„œ** `document.querySelectorAll()` / ê¸°ì¡´ `isVisible()` íŒì •ì´ ê³„ì† â€œë³´ì¸ë‹¤(=ìƒì„±ì¤‘)â€ë¡œ ì¡íˆëŠ” ê²½ìš°ê°€ í”í•´.
ê·¸ë˜ì„œ ğŸŸ  ìƒíƒœê°€ ê³„ì† ìœ ì§€ë˜ë‹¤ê°€, íƒ­ì„ ëˆŒëŸ¬ UIê°€ ë‹¤ì‹œ ë Œë”/ì •ë¦¬ë  ë•Œ(visibilitychangeë¡œ checkê°€ í•œ ë²ˆ ë” ëŒë©´ì„œ) ê·¸ì œì„œì•¼ ğŸŸ¢ë¡œ ë°”ë€ŒëŠ” ì¦ìƒì´ ë‚˜ì˜¬ ìˆ˜ ìˆìŒ.

ì•„ë˜ íŒ¨ì¹˜ëŠ” ê·¸ ì¼€ì´ìŠ¤ë¥¼ ì¡ê¸° ìœ„í•´:

* `isVisible()`ì„ **computedStyle ê¸°ë°˜ìœ¼ë¡œ ê°•í™”**(display/visibility/opacity/hidden/rect)
* GeminiëŠ” **enabled( disabled / aria-disabled )**ê¹Œì§€ ì²´í¬
* **open shadowRootê¹Œì§€ â€œdeep query + deep mutation observeâ€**ë¡œ ê°ì‹œ
* shadowRootê°€ ëŠ¦ê²Œ ë¶™ëŠ” ì¼€ì´ìŠ¤ ëŒ€ë¹„ë¡œ **ì €ë¹ˆë„ ì „ì²´ ìŠ¤ìº”(4ì´ˆ)** ì¶”ê°€

---

```diff
diff --git a/sources/src/content.js b/sources/src/content.js
--- a/sources/src/content.js
+++ b/sources/src/content.js
@@ -1,170 +1,336 @@
 let isGenerating = false;
 let checkInterval = null;
 let completionStatus = 'idle'; // 'idle' | 'completed'
 // ìµœì´ˆ 1íšŒëŠ” ë¬´ì¡°ê±´ backgroundë¡œ ìƒíƒœë¥¼ ë³´ë‚´ì„œ
 // "ì•„ë¬´ ì§ˆë¬¸ ì—†ìŒ" ìƒíƒœ(í°ìƒ‰ ë±ƒì§€)ë„ íƒ­ì— ì¦‰ì‹œ ë°˜ì˜ë˜ê²Œ í•œë‹¤.
 let hasSentInitialState = false;
 // íƒ­ íƒ€ì´í‹€ ë±ƒì§€(ì´ëª¨ì§€)
 const TITLE_BADGE = {
   WHITE: 'âšª',  // ëŒ€ê¸°/ì½ìŒ/ì•„ë¬´ ì§ˆë¬¸ ì—†ìŒ
   ORANGE: 'ğŸŸ ', // ìƒì„±ì¤‘
   GREEN: 'ğŸŸ¢',  // ì™„ë£Œ(ì•„ì§ í´ë¦­/ìŠ¤í¬ë¡¤ë¡œ í™•ì¸ ì „)
 };
 // ===== ë°±ê·¸ë¼ìš´ë“œ íƒ­ì—ì„œë„ ì™„ë£Œ ê°ì§€(íŠ¹íˆ Gemini) =====
 // - GeminiëŠ” DOM ë³€ê²½ì´ childListê°€ ì•„ë‹ˆë¼ attributes/styleë¡œë§Œ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ê°€ ìˆì–´
 //   MutationObserver(childList)ë§Œìœ¼ë¡œëŠ” "ì¤‘ì§€ ë²„íŠ¼ ì‚¬ë¼ì§"ì„ ëª» ì¡ê³  ğŸŸ ê°€ ìœ ì§€ë  ìˆ˜ ìˆìŒ.
 // - ë”°ë¼ì„œ attributes ê°ì‹œ + ì£¼ê¸° í´ë§(setInterval)ì„ ê°™ì´ ì‚¬ìš©í•œë‹¤.
 const CHECK_INTERVAL_MS = 1200;
 const MIN_CHECK_GAP_MS = 250;
 let _checkScheduled = false;
 let _lastCheckAt = 0;
 function scheduleCheck() {
   if (_checkScheduled) return;
   _checkScheduled = true;
   const now = Date.now();
   const delay = Math.max(0, MIN_CHECK_GAP_MS - (now - _lastCheckAt));
   setTimeout(() => {
     _checkScheduled = false;
     _lastCheckAt = Date.now();
     try {
       checkStatus();
     } catch (e) {
       // content scriptê°€ ì£½ì–´ë²„ë¦¬ë©´ ì´í›„ ìƒíƒœ ê°±ì‹ ì´ ëª¨ë‘ ë©ˆì¶”ë¯€ë¡œ ì˜ˆì™¸ëŠ” ì‚¼í‚´
       // (í•„ìš”í•˜ë©´ ì•„ë˜ ë¼ì¸ ì£¼ì„ í•´ì œ)
       // console.debug('[Ready_Ai] checkStatus failed', e);
     }
   }, delay);
 }
 function ensurePolling() {
   if (checkInterval) return;
   checkInterval = window.setInterval(() => {
     scheduleCheck();
   }, CHECK_INTERVAL_MS);
 }
-// ë‹¨ìˆœ ì…€ë ‰í„° ì œê±° -> ì•„ë˜ checkStatus í•¨ìˆ˜ ë‚´ì—ì„œ ë¡œì§ìœ¼ë¡œ ì²˜ë¦¬
-// ìš”ì†Œê°€ ì‹¤ì œë¡œ í™”ë©´ì— ë³´ì´ëŠ”ì§€ í™•ì¸í•˜ëŠ” í—¬í¼ í•¨ìˆ˜
+
+// ==========================
+// DOM íƒìƒ‰/ê°ì‹œ ìœ í‹¸
+// ==========================
+// GeminiëŠ” ì™„ë£Œ í›„ì—ë„ Stop ë²„íŠ¼ì´ DOMì— ë‚¨ì•„ìˆë˜
+// opacity/visibility/disabledë§Œ ë°”ë€ŒëŠ” ê²½ìš°ê°€ ìˆì–´ì„œ
+// ë‹¨ìˆœ offsetWidth/offsetHeightë§Œìœ¼ë¡œëŠ” "ë³´ì„" íŒì •ì´ í‹€ë¦´ ìˆ˜ ìˆë‹¤.
 function isVisible(elem) {
   if (!elem) return false;
+  // hidden ì†ì„±
+  if (elem.hasAttribute && elem.hasAttribute('hidden')) return false;
+
+  // computed style ê¸°ë°˜
+  let style;
+  try {
+    style = window.getComputedStyle(elem);
+  } catch (_) {
+    // getComputedStyleì´ ì‹¤íŒ¨í•˜ë©´ ìµœì†Œí•œì˜ DOM ê¸°ë°˜ íŒì •ë§Œ ìˆ˜í–‰
+    return !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length);
+  }
+
+  if (!style) return false;
+  if (style.display === 'none') return false;
+  if (style.visibility === 'hidden' || style.visibility === 'collapse') return false;
+  if (parseFloat(style.opacity || '1') === 0) return false;
+
+  // ë ˆì´ì•„ì›ƒ/ë Œë” ì‚¬ê°í˜•
+  const rect = elem.getBoundingClientRect ? elem.getBoundingClientRect() : null;
+  if (rect && (rect.width <= 0 || rect.height <= 0)) return false;
+
+  // ë§ˆì§€ë§‰ ì•ˆì „ì¥ì¹˜
   return !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length);
 }
+
+function isEnabledButtonLike(elem) {
+  if (!elem) return false;
+  // disabled / aria-disabled / role=button/ë²„íŠ¼ë¥˜ ê³µí†µ ì¼€ì´ìŠ¤
+  if (elem.disabled === true) return false;
+  const ariaDisabled = elem.getAttribute ? elem.getAttribute('aria-disabled') : null;
+  if (ariaDisabled && ariaDisabled.toLowerCase() === 'true') return false;
+  return true;
+}
+
+// ===== Shadow DOM(ì˜¤í”ˆ) ëŒ€ì‘ =====
+// - Gemini UIëŠ” open shadowRoot ì•„ë˜ì— ì£¼ìš” ë²„íŠ¼ì´ ë“¤ì–´ê°€ëŠ” ê²½ìš°ê°€ ìˆì–´
+//   document.querySelectorAllë§Œìœ¼ë¡œëŠ” Stop ë²„íŠ¼ ë³€í™”ë¥¼ ë†“ì¹  ìˆ˜ ìˆë‹¤.
+// - ë”°ë¼ì„œ "ì•Œë ¤ì§„ rootë“¤(document + open shadow roots)" ì— ëŒ€í•´
+//   (1) deep query
+//   (2) deep mutation observe
+// ë¥¼ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.
+const _deepRoots = new Set(); // Document | ShadowRoot
+const _deepObservers = new Map(); // root -> MutationObserver
+let _lastShadowRescanAt = 0;
+const SHADOW_RESCAN_MS = 4000;
+
+function addDeepRoot(root) {
+  if (!root) return;
+  if (_deepRoots.has(root)) return;
+  _deepRoots.add(root);
+  attachObserver(root);
+  // ë°©ê¸ˆ ì¶”ê°€ëœ shadowRoot ë‚´ë¶€ì—ë„ ë˜ ë‹¤ë¥¸ shadowRootê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ
+  // 1íšŒ ìŠ¤ìº”í•´ì„œ ê¹Šì€ êµ¬ì¡°ë¥¼ ì´ˆê¸°ì— ì¡ì•„ë‘”ë‹¤.
+  try {
+    scanTreeForShadowRoots(root);
+  } catch (_) {}
+}
+
+function attachObserver(root) {
+  if (!root) return;
+  if (_deepObservers.has(root)) return;
+
+  const obs = new MutationObserver((mutationList) => {
+    // ìƒˆë¡œ ìƒê¸´ shadowRootë¥¼ ì¶”ê°€ë¡œ ë“±ë¡
+    for (const m of mutationList) {
+      if (m.addedNodes && m.addedNodes.length) {
+        for (const n of m.addedNodes) {
+          scanTreeForShadowRoots(n);
+        }
+      }
+    }
+    scheduleCheck();
+  });
+
+  // Document/ShadowRoot ëª¨ë‘ observe ê°€ëŠ¥
+  try {
+    const target = root === document ? document.body : root;
+    if (!target) return;
+    obs.observe(target, {
+      childList: true,
+      subtree: true,
+      attributes: true,
+      // GeminiëŠ” style/class/aria-label ë³€ê²½ë§Œìœ¼ë¡œ UIê°€ ë°”ë€Œê¸°ë„ í•¨
+      attributeFilter: ['aria-label', 'style', 'class', 'hidden', 'disabled', 'aria-disabled']
+    });
+    _deepObservers.set(root, obs);
+  } catch (_) {
+    // observe ì‹¤íŒ¨ ì‹œ(íŠ¹ì • rootê°€ ë” ì´ìƒ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° ë“±) ë¬´ì‹œ
+  }
+}
+
+function scanTreeForShadowRoots(rootNode) {
+  if (!rootNode) return;
+
+  // Documentë¥¼ ë„˜ê²¨ë„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
+  let start = rootNode;
+  if (start === document) start = document.documentElement;
+  if (!start) return;
+
+  const stack = [];
+
+  // (1) Element ìì‹ ë„ ê²€ì‚¬ ëŒ€ìƒ
+  if (start.nodeType === Node.ELEMENT_NODE) stack.push(start);
+
+  // (2) ShadowRoot/DocumentFragment ê°™ì€ ê²½ìš°ì—ëŠ” í•˜ìœ„ elementë¶€í„° íƒìƒ‰
+  //     (shadowRootëŠ” childrenì„ ì œê³µí•˜ëŠ” ê²½ìš°ê°€ ë§ì§€ë§Œ, ì•ˆì „í•˜ê²Œ childNodesë„ ì²˜ë¦¬)
+  const seedChildren = start.children || start.childNodes;
+  if (seedChildren && seedChildren.length) {
+    for (let i = 0; i < seedChildren.length; i++) {
+      const n = seedChildren[i];
+      if (n && n.nodeType === Node.ELEMENT_NODE) stack.push(n);
+    }
+  }
+
+  while (stack.length) {
+    const el = stack.pop();
+    if (!el || el.nodeType !== Node.ELEMENT_NODE) continue;
+
+    if (el.shadowRoot) addDeepRoot(el.shadowRoot);
+
+    const kids = el.children;
+    if (kids && kids.length) {
+      for (let i = 0; i < kids.length; i++) stack.push(kids[i]);
+    }
+  }
+}
+
+function maybeRescanShadowRoots() {
+  const now = Date.now();
+  if (now - _lastShadowRescanAt < SHADOW_RESCAN_MS) return;
+  _lastShadowRescanAt = now;
+  try {
+    scanTreeForShadowRoots(document.documentElement);
+  } catch (_) {}
+}
+
+function initDeepRoots() {
+  addDeepRoot(document);
+  // ìµœì´ˆ 1íšŒ: ë¬¸ì„œ ì „ì²´ì—ì„œ open shadowRoot ìˆ˜ì§‘
+  try {
+    scanTreeForShadowRoots(document.documentElement);
+  } catch (_) {}
+}
+
+function deepQuerySelectorAll(selector) {
+  const out = [];
+  for (const root of _deepRoots) {
+    try {
+      out.push(...Array.from(root.querySelectorAll(selector)));
+    } catch (_) {}
+  }
+  return out;
+}
 function getPlatform() {
   const host = window.location.hostname;
   if (host.includes('chatgpt.com')) return 'chatgpt';
   if (host.includes('gemini.google.com')) return 'gemini';
   if (host.includes('aistudio.google.com')) return 'aistudio';
   if (host.includes('claude.ai')) return 'claude';
   return null;
 }
 // íƒ­ ì œëª©(Title)ì— ë°°ì§€(ì´ëª¨ì§€) ë‹¬ê¸° - ì•„ì´ì½˜ ë°”ë¡œ ì˜†ì— í‘œì‹œë¨
 function updateTitleBadge() {
   // 1. í˜„ì¬ ì œëª© ê°€ì ¸ì˜¤ê¸°
   const currentTitle = document.title;
   // 2. ì œëª© ì•ì˜ âšª/ğŸŸ /ğŸŸ¢ ë°°ì§€ ë° ê³µë°±ì„ ëª¨ë‘ ì œê±°í•˜ì—¬ ìˆœìˆ˜ ì œëª© ì¶”ì¶œ
   // (ì •ê·œì‹: ì¤„ ì‹œì‘(^)ì— ìˆëŠ” ë°°ì§€ ì´ëª¨ì§€ì™€ ê³µë°±(\s?)ì´ í•˜ë‚˜ ì´ìƒ(+) ìˆëŠ” ê²½ìš°)
   const cleanTitle = currentTitle.replace(/^([âšªğŸŸ ğŸŸ¢]\s?)+/, "");
   // 3. ìƒíƒœì— ë”°ë¥¸ ëª©í‘œ ì œëª© ìƒì„±
   let badge = TITLE_BADGE.WHITE;
   if (isGenerating) badge = TITLE_BADGE.ORANGE;
   else if (completionStatus === 'completed') badge = TITLE_BADGE.GREEN;
   const targetTitle = `${badge} ${cleanTitle}`;
   // 4. í˜„ì¬ ì œëª©ì´ ëª©í‘œì™€ ë‹¤ë¥¼ ë•Œë§Œ ë³€ê²½ (ì´ ë¹„êµê°€ ë¬´í•œ ë£¨í”„ë¥¼ ë§‰ì•„ì¤Œ)
   if (currentTitle !== targetTitle) {
     document.title = targetTitle;
   }
 }
 function checkStatus() {
   const platform = getPlatform();
   if (!platform) return;
   let currentlyGenerating = false;
   if (platform === 'chatgpt') {
     const btn = document.querySelector('[data-testid="stop-button"]');
     currentlyGenerating = isVisible(btn);
   } 
   else if (platform === 'gemini') {
-    // Gemini: "ì¤‘ì§€" ë˜ëŠ” "Stop" ë‹¨ì–´ê°€ ë“¤ì–´ê°„ ë²„íŠ¼ì´ í™”ë©´ì— ë³´ì´ëŠ”ì§€ í™•ì¸
-    const btns = document.querySelectorAll('[aria-label*="ì¤‘ì§€"], [aria-label*="Stop"], [aria-label*="stop"]');
-    currentlyGenerating = Array.from(btns).some(btn => isVisible(btn));
+    // GeminiëŠ” shadowRootê°€ ëŠ¦ê²Œ ë¶™ëŠ” ê²½ìš°ê°€ ìˆì–´
+    // ì¼ì • ì£¼ê¸°ë¡œ ì „ì²´ ìŠ¤ìº”(ì €ë¹ˆë„)í•˜ì—¬ ëˆ„ë½ëœ open shadowRootë¥¼ ë³´ì •í•œë‹¤.
+    maybeRescanShadowRoots();
+
+    // Gemini:
+    // - ì™„ë£Œ í›„ì—ë„ Stop ë²„íŠ¼ì´ DOMì— ë‚¨ì•„ìˆë˜ opacity/visibility/disabledë§Œ ë°”ë€ŒëŠ” ì¼€ì´ìŠ¤ê°€ ìˆìŒ
+    // - Gemini UIê°€ open shadowRoot ì•„ë˜ë¡œ ë“¤ì–´ê°€ë©´ document.querySelectorAllë§Œìœ¼ë¡œëŠ” ë²„íŠ¼ì„ ëª» ì°¾ëŠ” ì¼€ì´ìŠ¤ê°€ ìˆìŒ
+    // => deep query + "ì‹¤ì œ ë³´ì„" íŒì • + enabled íŒì •ìœ¼ë¡œ ìƒì„±ì¤‘ ì—¬ë¶€ë¥¼ íŒë‹¨
+    const btns = deepQuerySelectorAll(
+      'button[aria-label*="ì¤‘ì§€"], button[aria-label*="Stop"], button[aria-label*="stop"], ' +
+      '[role="button"][aria-label*="ì¤‘ì§€"], [role="button"][aria-label*="Stop"], [role="button"][aria-label*="stop"]'
+    );
+    currentlyGenerating = btns.some((btn) => isEnabledButtonLike(btn) && isVisible(btn));
   } 
   else if (platform === 'aistudio') {
     // AI Studio:
     // 1. Google Material Icon ìì²´ê°€ 'stop', 'cancel', 'block' ì¸ì§€ í™•ì¸ (ê°€ì¥ í™•ì‹¤í•¨)
     const icons = Array.from(document.querySelectorAll('mat-icon'));
     const hasStopIcon = icons.some(icon => {
       const iconName = icon.innerText.trim().toLowerCase();
       return ['stop', 'cancel', 'block', 'close'].includes(iconName) && isVisible(icon);
     });
     // 2. ë¡œë”©ë°” í™•ì¸
     const progressBar = document.querySelector('mat-progress-bar');
     currentlyGenerating = hasStopIcon || isVisible(progressBar);
   } 
   else if (platform === 'claude') {
     // Claude: ë²„íŠ¼ í…ìŠ¤íŠ¸ì— "Stop"ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
     // (ClaudeëŠ” divë‚˜ button ì•ˆì— "Stop" í…ìŠ¤íŠ¸ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë³´ì—¬ì¤Œ)
     const buttons = Array.from(document.querySelectorAll('button, div[role="button"]'));
     currentlyGenerating = buttons.some(btn => btn.innerText.includes('Stop') && isVisible(btn));
   }
   // ìƒíƒœê°€ ë³€í–ˆì„ ë•Œë§Œ ì²˜ë¦¬
   if (isGenerating !== currentlyGenerating) {
     isGenerating = currentlyGenerating;
     // ìš”êµ¬ì‚¬í•­:
     // - ìƒì„± ì‹œì‘: âšª -> ğŸŸ 
     // - ìƒì„± ì™„ë£Œ: ğŸŸ  -> ğŸŸ¢ (íƒ­ì´ í¬ì»¤ìŠ¤ì¸ì§€ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ê²Œ ë¬´ì¡°ê±´ ğŸŸ¢)
     // - ğŸŸ¢ ìƒíƒœëŠ” "í´ë¦­/ìŠ¤í¬ë¡¤"ë¡œë§Œ âšªë¡œ ëŒì•„ê°„ë‹¤.
     if (isGenerating) {
       completionStatus = 'idle';
     } else {
       completionStatus = 'completed';
     }
     chrome.runtime.sendMessage({
       action: "status_update",
       platform,
       isGenerating
     });
     hasSentInitialState = true;
   } else if (!hasSentInitialState) {
     // ì´ˆê¸° 1íšŒëŠ” ë¬´ì¡°ê±´ ìƒíƒœ ì „ì†¡(í°ìƒ‰ ë±ƒì§€ í‘œì‹œìš©)
     chrome.runtime.sendMessage({
       action: "status_update",
       platform,
       isGenerating
     });
     hasSentInitialState = true;
   }
   // ë£¨í”„ë§ˆë‹¤ ë°°ì§€ ìƒíƒœ ê°•ì œ ë™ê¸°í™” (ì‚¬ì´íŠ¸ê°€ ì œëª©ì„ ë°”ê¿”ë„ ë‹¤ì‹œ ë®ì–´ì”€)
   updateTitleBadge();
 }
 // ì‚¬ìš©ì ìƒí˜¸ì‘ìš©(í´ë¦­/ìŠ¤í¬ë¡¤) ì‹œ ğŸŸ¢ -> âšª ì „í™˜ (ìš”êµ¬ì‚¬í•­)
 function markAsAcknowledged() {
   if (isGenerating) return;
   if (completionStatus !== 'completed') return;
   completionStatus = 'idle';
   updateTitleBadge();
   // background(íˆ´ë°” ë°°ì§€)ë„ ê°™ì´ âšªë¡œ ë°”ê¿”ì¤€ë‹¤.
   chrome.runtime.sendMessage({
     action: 'user_activity',
     platform: getPlatform(),
     kind: 'ack'
   });
 }
 // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
 // - focus/keydownìœ¼ë¡œëŠ” ì ˆëŒ€ ì§€ìš°ì§€ ì•ŠëŠ”ë‹¤.
 // - "í´ë¦­" ë˜ëŠ” "ìŠ¤í¬ë¡¤(íœ /ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸)"ë¡œë§Œ ğŸŸ¢ -> âšª
 document.addEventListener('click', markAsAcknowledged, true);
 document.addEventListener('scroll', markAsAcknowledged, true);
 document.addEventListener('wheel', markAsAcknowledged, { passive: true, capture: true });
 // íƒ­ í™œì„±/ë¹„í™œì„± ì „í™˜ ì‹œì—ë„ ìƒíƒœ ì¬í‰ê°€(ë°±ê·¸ë¼ìš´ë“œ ì™„ë£Œ ê°ì§€ ë³´ê°•)
 document.addEventListener('visibilitychange', scheduleCheck);
-// DOM ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ ì²´í¬ ì‹¤í–‰ (ì„±ëŠ¥ì„ ìœ„í•´ 1ì´ˆì— í•œ ë²ˆì”©ë§Œ ì²´í¬í•˜ë„ë¡ í•  ìˆ˜ë„ ìˆìŒ)
-// ì—¬ê¸°ì„œëŠ” MutationObserverë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì‹œê°„ ë°˜ì‘ì„±ì„ ë†’ì…ë‹ˆë‹¤.
-const observer = new MutationObserver(() => {
-  scheduleCheck();
-});
-// ê°ì‹œ ì‹œì‘
-observer.observe(document.body, {
-  childList: true,
-  subtree: true,
-  // GeminiëŠ” childList ë³€í™” ì—†ì´ style/class/aria-labelë§Œ ë°”ë€ŒëŠ” ê²½ìš°ê°€ ìˆì–´
-  // attributes ê°ì‹œë¥¼ ì¼œì•¼ ğŸŸ  -> ğŸŸ¢ ì „í™˜ì„ ë†“ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
-  attributes: true,
-  attributeFilter: ['aria-label', 'style', 'class', 'hidden', 'disabled']
-});
+// ===== Deep DOM ê°ì‹œ ì‹œì‘ =====
+// (document + open shadow roots)
+initDeepRoots();
 
 // ì´ˆê¸° ë¡œë“œ ì‹œ ìƒíƒœ í™•ì¸
 ensurePolling();
 scheduleCheck();
 console.log("AI ë‹µë³€ ê°ì‹œìê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.");
```

---

### ìš”ì•½

* GeminiëŠ” **Stop ë²„íŠ¼ì´ DOMì— ë‚¨ì•„ ìˆ¨ê¹€ ì²˜ë¦¬**ë˜ê±°ë‚˜ **shadowRoot ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ëŠ”** ì¼€ì´ìŠ¤ ë•Œë¬¸ì—, ê¸°ì¡´ ë¡œì§ì´ ê³„ì† â€œìƒì„±ì¤‘(ğŸŸ )â€ìœ¼ë¡œ ì˜¤íŒí•  ìˆ˜ ìˆìŒ.
* íŒ¨ì¹˜ë¡œ **(1) ì‹¤ì œ ë³´ì„ íŒì • ê°•í™” + (2) disabled/aria-disabled ì²´í¬ + (3) open shadowRootê¹Œì§€ deep query/observe + (4) ì €ë¹ˆë„ ì „ì²´ ìŠ¤ìº”**ì„ ì¶”ê°€í•´ì„œ, íƒ­ í´ë¦­ ì•ˆ í•´ë„ ğŸŸ â†’ğŸŸ¢ ì „í™˜ì´ í›¨ì”¬ ì•ˆì •ì ìœ¼ë¡œ ë˜ê²Œ ë§Œë“¦.


(ì°¸ê³ : ì´ íŒŒì¼ì€ ë¶„ì„ëœ ì†ŒìŠ¤ ì½”ë“œê°€ í¬í•¨ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.)